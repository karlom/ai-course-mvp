import dotenv from 'dotenv';\nimport { Worker } from 'bullmq';\nimport IORedis from 'ioredis';\nimport axios from 'axios';\n\ndotenv.config();\n\nconst connection = new IORedis({\n  host: process.env.REDIS_HOST || 'redis',\n  port: Number(process.env.REDIS_PORT || 6379),\n});\n\nconst pythonWorkerUrl = `http://${process.env.PYTHON_WORKER_HOST || 'python-worker'}:${process.env.PYTHON_WORKER_PORT || 8001}/process_job`;\n\nconst worker = new Worker('generate-course', async job => {\n  console.log('Node Worker received job:', job.id, job.name);\n  const payload = job.data.payload;\n\n  // Call Python processing service (HTTP) to do heavy lifting\n  try {\n    const resp = await axios.post(pythonWorkerUrl, { jobId: job.id, payload });\n    // The Python service should return { success, result: {pptx_path, slides_json} }\n    const result = resp.data;\n    await job.updateProgress(100);\n    return result;\n  } catch (err) {\n    console.error('Error calling python worker', err);\n    throw err;\n  }\n}, { connection });\n\nworker.on('failed', (job, err) => {\n  console.error(`Job ${job.id} failed:`, err);\n});\n\nconsole.log('Node worker started, listening to generate-course queue');